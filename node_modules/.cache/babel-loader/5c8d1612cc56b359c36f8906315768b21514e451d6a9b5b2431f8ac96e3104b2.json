{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"../utils/axiosInstance\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const setOpenGraph=post=>{const metaTags=[{property:\"og:title\",content:post.title},{property:\"og:description\",content:post.content.slice(0,150)},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:window.location.href},{property:\"og:site_name\",content:\"Nexpertia\"}// Tilføj evt. image\n// { property: \"og:image\", content: \"https://nexpertia.dk/cover.jpg\" }\n];metaTags.forEach(_ref=>{let{property,content}=_ref;let tag=document.querySelector(\"meta[property='\".concat(property,\"']\"));if(!tag){tag=document.createElement(\"meta\");tag.setAttribute(\"property\",property);document.head.appendChild(tag);}tag.setAttribute(\"content\",content);});};const BlogPost=()=>{const{slug}=useParams();const[post,setPost]=useState(null);useEffect(()=>{if(post){setOpenGraph(post);}},[post]);const fetchPost=async()=>{const res=await axios.get(\"/blog/\".concat(slug));setPost(res.data);document.title=\"\".concat(res.data.title,\" | Nexpertia Blog\");setMetaDescription(res.data.content.slice(0,160));insertStructuredData(res.data);};const setMetaDescription=desc=>{let tag=document.querySelector(\"meta[name='description']\");if(!tag){tag=document.createElement(\"meta\");tag.name=\"description\";document.head.appendChild(tag);}tag.content=desc;};const insertStructuredData=data=>{const script=document.createElement(\"script\");script.type=\"application/ld+json\";script.innerHTML=JSON.stringify({\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":data.title,\"datePublished\":data.created_at,\"author\":{\"@type\":\"Person\",\"name\":data.author},\"articleBody\":data.content.slice(0,300)});document.head.appendChild(script);};if(!post)return/*#__PURE__*/_jsx(\"p\",{className:\"p-6\",children:\"Indl\\xE6ser...\"});return/*#__PURE__*/_jsxs(\"article\",{className:\"max-w-3xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-2\",children:post.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mb-6\",children:[\"Skrevet af \",post.author,\" \\u2013 \",new Date(post.created_at).toLocaleDateString(\"da-DK\",{dateStyle:\"long\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"prose max-w-none\",dangerouslySetInnerHTML:{__html:post.content}})]});};export default BlogPost;","map":{"version":3,"names":["React","useEffect","useState","useParams","axios","jsx","_jsx","jsxs","_jsxs","setOpenGraph","post","metaTags","property","content","title","slice","window","location","href","forEach","_ref","tag","document","querySelector","concat","createElement","setAttribute","head","appendChild","BlogPost","slug","setPost","fetchPost","res","get","data","setMetaDescription","insertStructuredData","desc","name","script","type","innerHTML","JSON","stringify","created_at","author","className","children","Date","toLocaleDateString","dateStyle","dangerouslySetInnerHTML","__html"],"sources":["C:/Users/danie/Documents/Projekter/nexpertia/frontend/src/pages/BlogPost.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from \"../utils/axiosInstance\";\r\n\r\nconst setOpenGraph = (post) => {\r\n  const metaTags = [\r\n    { property: \"og:title\", content: post.title },\r\n    { property: \"og:description\", content: post.content.slice(0, 150) },\r\n    { property: \"og:type\", content: \"article\" },\r\n    { property: \"og:url\", content: window.location.href },\r\n    { property: \"og:site_name\", content: \"Nexpertia\" },\r\n    // Tilføj evt. image\r\n    // { property: \"og:image\", content: \"https://nexpertia.dk/cover.jpg\" }\r\n  ];\r\n\r\n  metaTags.forEach(({ property, content }) => {\r\n    let tag = document.querySelector(`meta[property='${property}']`);\r\n    if (!tag) {\r\n      tag = document.createElement(\"meta\");\r\n      tag.setAttribute(\"property\", property);\r\n      document.head.appendChild(tag);\r\n    }\r\n    tag.setAttribute(\"content\", content);\r\n  });\r\n};\r\n\r\nconst BlogPost = () => {\r\n  const { slug } = useParams();\r\n  const [post, setPost] = useState(null);\r\n\r\n  useEffect(() => {\r\n  if (post) {\r\n    setOpenGraph(post);\r\n  }\r\n  }, [post]);\r\n\r\n  const fetchPost = async () => {\r\n    const res = await axios.get(`/blog/${slug}`);\r\n    setPost(res.data);\r\n    document.title = `${res.data.title} | Nexpertia Blog`;\r\n    setMetaDescription(res.data.content.slice(0, 160));\r\n    insertStructuredData(res.data);\r\n  };\r\n\r\n  const setMetaDescription = (desc) => {\r\n    let tag = document.querySelector(\"meta[name='description']\");\r\n    if (!tag) {\r\n      tag = document.createElement(\"meta\");\r\n      tag.name = \"description\";\r\n      document.head.appendChild(tag);\r\n    }\r\n    tag.content = desc;\r\n  };\r\n\r\n  const insertStructuredData = (data) => {\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"application/ld+json\";\r\n    script.innerHTML = JSON.stringify({\r\n      \"@context\": \"https://schema.org\",\r\n      \"@type\": \"BlogPosting\",\r\n      \"headline\": data.title,\r\n      \"datePublished\": data.created_at,\r\n      \"author\": {\r\n        \"@type\": \"Person\",\r\n        \"name\": data.author\r\n      },\r\n      \"articleBody\": data.content.slice(0, 300)\r\n    });\r\n    document.head.appendChild(script);\r\n  };\r\n\r\n  if (!post) return <p className=\"p-6\">Indlæser...</p>;\r\n\r\n  return (\r\n    <article className=\"max-w-3xl mx-auto p-6\">\r\n      <h1 className=\"text-3xl font-bold mb-2\">{post.title}</h1>\r\n      <p className=\"text-sm text-gray-500 mb-6\">\r\n        Skrevet af {post.author} – {new Date(post.created_at).toLocaleDateString(\"da-DK\", { dateStyle: \"long\" })}\r\n      </p>\r\n      <div\r\n        className=\"prose max-w-none\"\r\n        dangerouslySetInnerHTML={{ __html: post.content }}\r\n      />\r\n    </article>\r\n  );\r\n};\r\n\r\nexport default BlogPost;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}